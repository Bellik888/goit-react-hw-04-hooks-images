(this["webpackJsonpgoit-react-hw-hooks-images"]=this["webpackJsonpgoit-react-hw-hooks-images"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(8),s=n.n(a),i=(n(32),n(33),n(9)),o=n(10),u=n(27),l=n(26),h=(n(34),n(4)),j=n(0),d=function(e){var t=e.onSubmit,n=Object(c.useState)(""),r=Object(h.a)(n,2),a=r[0],s=r[1];return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(a)},children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(j.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(j.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){s(e.target.value)}})]})})},b=n(14),m=(n(36),n(23)),f=n.n(m),p=n(13),g=n.n(p),O=n(24),v=n(25),x=n.n(v),y=function(){function e(t,n){Object(i.a)(this,e),this.BASE_URL=t,this.API_KEY=n,this._searchQuery="",this._page=1,this.perPage=12,this.urlWithKey=""}return Object(o.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchPhotos",value:function(){var e=Object(O.a)(g.a.mark((function e(){var t,n,c,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.urlWithKey=this.BASE_URL+"?key=".concat(this.API_KEY),t="&q=".concat(this._searchQuery,"&page=").concat(this.page,"&per_page=").concat(this.perPage),n=this.urlWithKey+t,e.prev=3,e.next=6,x.a.get(n);case 6:return c=e.sent,r=c.data.hits,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",console.log(e.t0));case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),S=function(e){var t=e.children;return Object(j.jsx)("ul",{className:"ImageGallery",children:t})},w=function(e){var t=e.searchResults,n=e.openModal;return Object(j.jsx)(j.Fragment,{children:t.map((function(e){var t=e.id,c=e.webformatURL,r=e.tags;return Object(j.jsx)("li",{id:t,onClick:n,className:"ImageGalleryItem",children:Object(j.jsx)("img",{src:c,alt:r,className:"ImageGalleryItem-image"})},t)}))})},k=function(e){var t=e.onClick;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{className:"btn-load",type:"button",onClick:t,children:"Load more"})})},N=document.querySelector("#modalRoot"),I=function(e){var t=e.onClose,n=e.children;function r(e){"Escape"===e.code&&t()}Object(c.useEffect)((function(){window.addEventListener("keydown",r)})),Object(c.useEffect)((function(){return function(){window.removeEventListener("keydown",r)}}));return Object(a.createPortal)(Object(j.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(j.jsx)("div",{className:"Modal",children:n})}),N)},_=new y("https://pixabay.com/api/","23189092-912e167e41c5e7d499821c37e"),E=function(e){var t=e.searchValue,n=Object(c.useState)([]),r=Object(h.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)("idle"),o=Object(h.a)(i,2),u=o[0],l=o[1],d=Object(c.useState)(null),m=Object(h.a)(d,2),p=m[0],g=m[1],O=Object(c.useState)(!1),v=Object(h.a)(O,2),x=v[0],y=v[1];Object(c.useEffect)((function(){t&&(l("pending"),_.resetPage(),_.searchQuery=t,_.searchPhotos().then((function(e){s(e),l("resolved")})).catch((function(e){console.log(e),l("rejected")})))}),[t]);var N=function(){return a.find((function(e){return e.id===p}))},E=a.length>0&&a.length>=12;return"idle"===u?Object(j.jsx)("div",{className:"container-title",children:Object(j.jsx)("p",{children:"You can find any pictures, photos and images here"})}):"pending"===u?Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)(f.a,{type:"Circles",color:"#00BFFF",height:100,width:100,timeout:3e3})}):"rejected"===u?Object(j.jsx)("div",{className:"container-title",children:Object(j.jsx)("p",{children:"Uppps, error"})}):"resolved"===u?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(S,{children:a.length>0&&Object(j.jsx)(w,{openModal:function(e){y(!0),g(Number(e.currentTarget.id))},searchResults:a})}),E>0&&Object(j.jsx)(k,{onClick:function(){_.page=1,_.searchPhotos().then((function(e){s((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),l("resolved")})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){console.log(e),l("rejected")}))}}),0===a.length&&Object(j.jsx)("div",{className:"container-title",children:Object(j.jsx)("p",{children:"Sorry, we did not find this"})}),x&&Object(j.jsx)(I,{largeImageId:p,onClose:function(){return y(!1)},children:Object(j.jsx)("img",{src:N().largeImageURL,alt:N().tags})})]}):void 0},C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.searchImages=function(t){e.setState({searchQuery:t})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(d,{onSubmit:this.searchImages}),Object(j.jsx)(E,{searchValue:this.state.searchQuery})]})}}]),n}(c.Component),F=C;s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.df5fc5f3.chunk.js.map