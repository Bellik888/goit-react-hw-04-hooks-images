{"version":3,"sources":["components/Searchbar/Searchbar.js","service/pixabayAPI.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImagesList/ImagesList.js","App.js","index.js"],"names":["Searchbar","state","inputValue","handleSearchValue","e","setState","target","value","handleFormSubmit","preventDefault","props","onSubmit","this","className","type","autoComplete","autoFocus","placeholder","onChange","Component","PixabayAPI","BASE_URL","API_KEY","_searchQuery","_page","perPage","urlWithKey","a","params","page","url","axios","get","result","data","hits","console","log","ImageGallery","children","ImageGalleryItem","searchResults","openModal","map","id","webformatURL","tags","onClick","src","alt","Button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleClickBackdrop","event","currentTarget","window","addEventListener","removeEventListener","createPortal","newPixabayAPI","ImagesList","status","largeImageId","isModalOpen","handleClick","searchPhotos","then","prev","scrollTo","top","documentElement","scrollHeight","behavior","catch","err","findImg","find","Number","closeModal","prevProps","prevState","searchValue","resetPage","searchQuery","error","paramLoadMore","length","color","height","width","timeout","largeImageURL","App","searchImages","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.81d485d0.chunk.js","sourcesContent":["import { Component } from 'react';\n\nexport class Searchbar extends Component {\n  state = {\n    inputValue: '',\n  };\n\n  handleSearchValue = e => {\n    this.setState({ inputValue: e.target.value });\n  };\n  handleFormSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.inputValue);\n  };\n\n  render() {\n    const { handleFormSubmit, handleSearchValue } = this;\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={handleFormSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={handleSearchValue}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import axios from 'axios';\n\nexport class PixabayAPI {\n  constructor(BASE_URL, API_KEY) {\n    this.BASE_URL = BASE_URL;\n    this.API_KEY = API_KEY;\n    this._searchQuery = '';\n    this._page = 1;\n    this.perPage = 12;\n    this.urlWithKey = '';\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  async searchPhotos() {\n    this.urlWithKey = this.BASE_URL + `?key=${this.API_KEY}`;\n    let params = `&q=${this._searchQuery}&page=${this.page}&per_page=${this.perPage}`;\n    let url = this.urlWithKey + params;\n\n    try {\n      const result = await axios.get(url);\n      const data = result.data.hits;\n      return data;\n    } catch (err) {\n      return console.log(err);\n    }\n  }\n}\n","export const ImageGallery = ({ children }) => {\n  return <ul className=\"ImageGallery\">{children}</ul>;\n};\n","import PropTypes from 'prop-types';\n\nexport const ImageGalleryItem = ({ searchResults, openModal }) => {\n  return (\n    <>\n      {searchResults.map(({ id, webformatURL, tags }) => (\n        <li key={id} id={id} onClick={openModal} className=\"ImageGalleryItem\">\n          <img\n            src={webformatURL}\n            alt={tags}\n            className=\"ImageGalleryItem-image\"\n          />\n        </li>\n      ))}\n    </>\n  );\n};\nImageGalleryItem.propTypes = {\n  searchResults: PropTypes.array,\n  openModal: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nexport const Button = ({ onClick }) => {\n  return (\n    <>\n      <button className=\"btn-load\" type=\"button\" onClick={onClick}>\n        Load more\n      </button>\n    </>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modalRoot');\n\nexport class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleClickBackdrop = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleClickBackdrop}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\n\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport { PixabayAPI } from '../../service/pixabayAPI';\nimport { ImageGallery } from '../ImageGallery/ImageGallery';\nimport { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem';\nimport { Button } from '../Button/Button';\nimport { Modal } from '../Modal/Modal';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '23189092-912e167e41c5e7d499821c37e';\nconst newPixabayAPI = new PixabayAPI(BASE_URL, API_KEY);\n\nexport class ImagesList extends Component {\n  state = {\n    searchResults: [],\n    status: 'idle',\n    largeImageId: null,\n    isModalOpen: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    let { searchValue } = this.props;\n    if (prevProps.searchValue !== searchValue) {\n      this.setState({ status: 'pending' });\n      newPixabayAPI.resetPage();\n      newPixabayAPI.searchQuery = searchValue;\n      newPixabayAPI\n        .searchPhotos()\n        .then(result => {\n          this.setState({ searchResults: result, status: 'resolved' });\n        })\n        .catch(error => {\n          console.log(error);\n          this.setState({ status: 'rejected' });\n        });\n    }\n  }\n\n  handleClick = () => {\n    newPixabayAPI.page = 1;\n    newPixabayAPI\n      .searchPhotos()\n      .then(result => {\n        this.setState(prev => ({\n          searchResults: [...prev.searchResults, ...result],\n          status: 'resolved',\n        }));\n      })\n      .then(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ status: 'rejected' });\n      });\n  };\n\n  findImg = () => {\n    const { searchResults, largeImageId } = this.state;\n    const largeImg = searchResults.find(result => {\n      return result.id === largeImageId;\n    });\n    return largeImg;\n  };\n\n  openModal = e => {\n    this.setState({\n      isModalOpen: true,\n      largeImageId: Number(e.currentTarget.id),\n    });\n  };\n  closeModal = () => this.setState({ isModalOpen: false });\n\n  render() {\n    const { searchResults, largeImageId, isModalOpen, status } = this.state;\n    const { handleClick, findImg, openModal, closeModal } = this;\n\n    const paramLoadMore =\n      searchResults.length > 0 && searchResults.length >= 12;\n\n    if (status === 'idle') {\n      return (\n        <div className=\"container-title\">\n          <p>You can find any pictures, photos and images here</p>\n        </div>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <div className=\"loader\">\n          <Loader\n            type=\"Circles\"\n            color=\"#00BFFF\"\n            height={100}\n            width={100}\n            timeout={3000}\n          />\n        </div>\n      );\n    }\n\n    if (status === 'rejected') {\n      return (\n        <div className=\"container-title\">\n          <p>Uppps, error</p>\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ImageGallery>\n            {searchResults.length > 0 && (\n              <ImageGalleryItem\n                openModal={openModal}\n                searchResults={searchResults}\n              />\n            )}\n          </ImageGallery>\n          {paramLoadMore > 0 && <Button onClick={handleClick} />}\n          {searchResults.length === 0 && (\n            <div className=\"container-title\">\n              <p>Sorry, we did not find this</p>\n            </div>\n          )}\n          {isModalOpen && (\n            <Modal largeImageId={largeImageId} onClose={closeModal}>\n              <img src={findImg().largeImageURL} alt={findImg().tags} />\n            </Modal>\n          )}\n        </>\n      );\n    }\n  }\n}\n","import { Component } from 'react';\nimport './App.css';\n\nimport { Searchbar } from './components/Searchbar/Searchbar';\nimport { ImagesList } from './components/ImagesList/ImagesList';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  searchImages = value => {\n    this.setState({ searchQuery: value });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.searchImages} />\n        <ImagesList searchValue={this.state.searchQuery} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}