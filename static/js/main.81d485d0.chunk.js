(this["webpackJsonpgoit-react-hw-hooks-images"]=this["webpackJsonpgoit-react-hw-hooks-images"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),s=n.n(c),o=(n(29),n(30),n(4)),i=n(5),l=n(7),u=n(6),h=(n(31),n(0)),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={inputValue:""},e.handleSearchValue=function(t){e.setState({inputValue:t.target.value})},e.handleFormSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.inputValue)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.handleFormSubmit,t=this.handleSearchValue;return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:e,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:t})]})})}}]),n}(a.Component),p=n(13),j=(n(33),n(22)),m=n.n(j),b=n(12),g=n.n(b),f=n(23),O=n(24),v=n.n(O),y=function(){function e(t,n){Object(o.a)(this,e),this.BASE_URL=t,this.API_KEY=n,this._searchQuery="",this._page=1,this.perPage=12,this.urlWithKey=""}return Object(i.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"searchPhotos",value:function(){var e=Object(f.a)(g.a.mark((function e(){var t,n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.urlWithKey=this.BASE_URL+"?key=".concat(this.API_KEY),t="&q=".concat(this._searchQuery,"&page=").concat(this.page,"&per_page=").concat(this.perPage),n=this.urlWithKey+t,e.prev=3,e.next=6,v.a.get(n);case 6:return a=e.sent,r=a.data.hits,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",console.log(e.t0));case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),x=function(e){var t=e.children;return Object(h.jsx)("ul",{className:"ImageGallery",children:t})},k=function(e){var t=e.searchResults,n=e.openModal;return Object(h.jsx)(h.Fragment,{children:t.map((function(e){var t=e.id,a=e.webformatURL,r=e.tags;return Object(h.jsx)("li",{id:t,onClick:n,className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:a,alt:r,className:"ImageGalleryItem-image"})},t)}))})},S=function(e){var t=e.onClick;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{className:"btn-load",type:"button",onClick:t,children:"Load more"})})},w=document.querySelector("#modalRoot"),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleClickBackdrop=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:this.handleClickBackdrop,children:Object(h.jsx)("div",{className:"Modal",children:this.props.children})}),w)}}]),n}(a.Component),C=new y("https://pixabay.com/api/","23189092-912e167e41c5e7d499821c37e"),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:[],status:"idle",largeImageId:null,isModalOpen:!1},e.handleClick=function(){C.page=1,C.searchPhotos().then((function(t){e.setState((function(e){return{searchResults:[].concat(Object(p.a)(e.searchResults),Object(p.a)(t)),status:"resolved"}}))})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(t){console.log(t),e.setState({status:"rejected"})}))},e.findImg=function(){var t=e.state,n=t.searchResults,a=t.largeImageId;return n.find((function(e){return e.id===a}))},e.openModal=function(t){e.setState({isModalOpen:!0,largeImageId:Number(t.currentTarget.id)})},e.closeModal=function(){return e.setState({isModalOpen:!1})},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.props.searchValue;e.searchValue!==a&&(this.setState({status:"pending"}),C.resetPage(),C.searchQuery=a,C.searchPhotos().then((function(e){n.setState({searchResults:e,status:"resolved"})})).catch((function(e){console.log(e),n.setState({status:"rejected"})})))}},{key:"render",value:function(){var e=this.state,t=e.searchResults,n=e.largeImageId,a=e.isModalOpen,r=e.status,c=this.handleClick,s=this.findImg,o=this.openModal,i=this.closeModal,l=t.length>0&&t.length>=12;return"idle"===r?Object(h.jsx)("div",{className:"container-title",children:Object(h.jsx)("p",{children:"You can find any pictures, photos and images here"})}):"pending"===r?Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)(m.a,{type:"Circles",color:"#00BFFF",height:100,width:100,timeout:3e3})}):"rejected"===r?Object(h.jsx)("div",{className:"container-title",children:Object(h.jsx)("p",{children:"Uppps, error"})}):"resolved"===r?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(x,{children:t.length>0&&Object(h.jsx)(k,{openModal:o,searchResults:t})}),l>0&&Object(h.jsx)(S,{onClick:c}),0===t.length&&Object(h.jsx)("div",{className:"container-title",children:Object(h.jsx)("p",{children:"Sorry, we did not find this"})}),a&&Object(h.jsx)(I,{largeImageId:n,onClose:i,children:Object(h.jsx)("img",{src:s().largeImageURL,alt:s().tags})})]}):void 0}}]),n}(a.Component),F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.searchImages=function(t){e.setState({searchQuery:t})},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(d,{onSubmit:this.searchImages}),Object(h.jsx)(N,{searchValue:this.state.searchQuery})]})}}]),n}(a.Component),M=F;s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(M,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.81d485d0.chunk.js.map